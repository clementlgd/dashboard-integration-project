var url_global ='data:application/json;charset=utf-8,%7B%0A%20%20"annee2016"%20%3A%20%7B%0A%20%20%20%20"enjeux"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"janvier"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"fevrier"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mars"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"avril"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mai"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2024%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juin"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juillet"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"7"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"aout"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"8"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"septembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2019%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"9"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"octobre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2024%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"10"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"novembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"11"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"decembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20"pbj"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"janvier"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"fevrier"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mars"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2019%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"avril"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mai"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juin"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juillet"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"7"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"aout"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"8"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"septembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"9"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"octobre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"10"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"novembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"11"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"decembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20"annee2017"%20%3A%20%7B%0A%20%20%20%20"enjeux"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"janvier%20"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"fevrier"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mars"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"avril"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mai"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2024%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juin"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juillet"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2017%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"7"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"aout"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"8"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"septembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"9"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"octobre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"10"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"novembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"11"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"decembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20"pbj"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"janvier%20"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"fevrier"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mars"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2019%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"avril"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"mai"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juin"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"juillet"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2024%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"7"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"aout"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"8"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"septembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2017%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"9"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"octobre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"10"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"novembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"11"%3A%20%7B%0A%20%20%20%20%20%20%20%20"mois"%3A%20"decembre"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A';


var url_prevision ='data:application/json;charset=utf-8,%7B%0A%20%20"annee2017"%20%3A%20%7B%0A%20%20%20%20"enjeux"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"03/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"04/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2020%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"05/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"06/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"07/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2024%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"08/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"09/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20"pbj"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"03/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2016%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"04/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2017%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"05/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2016%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"06/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"07/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2019%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"08/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2016%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"09/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2015%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%2C%0A%20%20"annee2018"%20%3A%20%7B%0A%20%20%20%20"enjeux"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"03/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2024%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"04/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"05/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2021%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"06/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2023%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"07/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2025%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"08/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2022%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"09/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20"pbj"%20%3A%20%7B%0A%20%20%20%20%20%20"0"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"03/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2016%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"1"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"04/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2015%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"2"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"05/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2016%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"3"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"06/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2018%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"4"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"07/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2019%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"5"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"08/12/18"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2016%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"6"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"09/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2014%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20"7"%3A%20%7B%0A%20%20%20%20%20%20%20%20"periode"%3A%20"09/12/17"%2C%0A%20%20%20%20%20%20%20%20"ca"%3A%2016%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A';



//Fonction qui permet d'actualiser un chart
  function updateData(chart, label, data, data1) {
    chart.data.labels = label;
    chart.data.datasets[0].data= data;
    chart.data.datasets[1].data= data1;
    chart.update();
  }


fetch(url_global).then(function(response){
       return response.json()
    })
    .then(function(data){
      console.log(data);

      //Fonction qui permet d'actualiser un chart
        function updateData(chart, label, data, data1) {
          chart.data.labels = label;
          chart.data.datasets[0].data= data;
          chart.data.datasets[1].data= data1;
          chart.update();
        }

      var arr_mois = [];
      var arr_2016enjeux_ca = [];
      var arr_2016pbj_ca = [];
      var arr_2017enjeux_ca = [];
      var arr_2017pbj_ca = [];

      var object_2016enjeux_length = Object.keys(data.annee2016.enjeux).length;
      var object_2016pbj_length = Object.keys(data.annee2016.pbj).length;
      var object_2017enjeux_length = Object.keys(data.annee2017.enjeux).length;
      var object_2017pbj_length = Object.keys(data.annee2017.pbj).length;

      for (var i = 0; i < object_2016enjeux_length; i++) {
        arr_mois.push(data.annee2016.enjeux[i].mois);
        arr_2016enjeux_ca.push(data.annee2016.enjeux[i].ca);
      }
      for (var i = 0; i < object_2016pbj_length; i++) {
        arr_2016pbj_ca.push(data.annee2016.pbj[i].ca);
      }
      for (var i = 0; i < object_2017enjeux_length; i++) {
        arr_2017enjeux_ca.push(data.annee2017.enjeux[i].ca);
      }
      for (var i = 0; i < object_2017pbj_length; i++) {
        arr_2017pbj_ca.push(data.annee2017.pbj[i].ca);
      }

      // console.log(arr_mois);
      // console.log(arr_2016enjeux_ca);
      // console.log(arr_2016pbj_ca);
      // console.log(arr_2017enjeux_ca);
      // console.log(arr_2017pbj_ca);


    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
      // The type of chart we want to create
      type: 'line',

      // The data for our dataset
      data: {
      labels: arr_mois,
      datasets: [{
        label: "Année 2017",
        backgroundColor: 'rgba(58, 170, 52, 0.5)',
        borderColor: '#3AAA34',
        data: arr_2017enjeux_ca,
      },
      {
        label: "Année 2016",
        backgroundColor: 'rgba(192,192,192, 0.3)',
        borderColor: '#C0C0C0',
        data: arr_2016enjeux_ca,
      }]
  },
  // Configuration options
  options: {
    tooltips: {
      mode: 'index',
      intersect: false,
    },
    hover: {
      mode: 'nearest',
      intersect: true
    },
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      xAxes: [{
        ticks: {
          beginAtZero: true,
        },
        gridLines: {
          display:false
        },
        scaleLabel: {
            display: true,
            labelString: 'Mois'
          }
      }],
      yAxes: [{
        ticks: {
          beginAtZero: true,
        },
        gridLines: {
          display:false
        },
        scaleLabel: {
            display: true,
            labelString: 'CA ( en millions € )'
          }
      }]
    }
  }
  });


  // Chart GLOBAL ENJEUX / PBJ UPDATE DATA ON CLICK BUTTON
///////////////////////////////
var $enjeux_btn = document.querySelector('.enjeux_btn');
var $pbj_btn = document.querySelector('.pbj_btn');
// update la data au click sur le bouton enjeux
$enjeux_btn.addEventListener('click', function(){
  updateData(chart, arr_mois, arr_2016enjeux_ca, arr_2017enjeux_ca);
});
// update la data au click sur le bouton pbj
$pbj_btn.addEventListener('click', function(){
  updateData(chart, arr_mois, arr_2016pbj_ca, arr_2017pbj_ca);
});
// Active le css du bouton ENJEUX au click
$enjeux_btn.addEventListener('click', function(){
  $enjeux_btn.classList.add('btn-active');
  $pbj_btn.classList.remove('btn-active');
});
// Active le css du bouton PBJ au click
$pbj_btn.addEventListener('click', function(){
  $pbj_btn.classList.add('btn-active');
  $enjeux_btn.classList.remove('btn-active');
});
// END Chart ENJEUX / PBJ GLOBAL
///////////////////////////////

});





//EVOLUTION GLOBALE ENJEUX / PBJ
var $evolution_enjeux_btn = document.querySelector('.evolution_enjeux_btn');
var $evolution_pbj_btn = document.querySelector('.evolution_pbj_btn');
var $global_evolution_data = document.querySelector('.global-evolution-data');
var $global_evolution_rt2_data = document.querySelector('.global-evolution-rt2-data');
var $global_evolution_budget_data = document.querySelector('.global-evolution-budget-data');
var enjeux_value1 = "+6,4%";
var enjeux_value2 = "+2,6%";
var enjeux_value3 = "+3,1%";
var pbj_value1 = "+2,7%";
var pbj_value2 = "+3,1%";
var pbj_value3 = "+4,5%";


// Active le css du bouton EVOLUTION GLOBALE ENJEUX au click
$evolution_enjeux_btn.addEventListener('click', function(){
  $evolution_enjeux_btn.classList.add('btn-active');
  $evolution_pbj_btn.classList.remove('btn-active');

  $global_evolution_data.textContent = enjeux_value1;
  $global_evolution_rt2_data.textContent = enjeux_value2;
  $global_evolution_budget_data.textContent = enjeux_value3;
});
// Active le css du bouton EVOLUTION GLOBALE PBJ au click
$evolution_pbj_btn.addEventListener('click', function(){
  $evolution_pbj_btn.classList.add('btn-active');
  $evolution_enjeux_btn.classList.remove('btn-active');

  $global_evolution_data.textContent = pbj_value1;
  $global_evolution_rt2_data.textContent = pbj_value2;
  $global_evolution_budget_data.textContent = pbj_value3;
});





////////////////////////////////////////////////////////
////////////////////PREVISION///////////////////////////
////////////////////////////////////////////////////////

fetch(url_prevision).then(function(response){
       return response.json()
    })
    .then(function(data){
      console.log(data);

      //Fonction qui permet d'actualiser un chart
        function updateData(chart, label, data, data1) {
          chart.data.labels = label;
          chart.data.datasets[0].data= data;
          chart.data.datasets[1].data= data1;
          chart.update();
        }

      var arr_periode2017 = [];
      var arr_periode2018 = [];
      var arr_prev_2017enjeux_ca = [];
      var arr_prev_2017pbj_ca = [];
      var arr_prev_2018enjeux_ca = [];
      var arr_prev_2018pbj_ca = [];

      var object_2017enjeux_length = Object.keys(data.annee2017.enjeux).length;
      var object_2017pbj_length = Object.keys(data.annee2017.pbj).length;
      var object_2018enjeux_length = Object.keys(data.annee2018.enjeux).length;
      var object_2018pbj_length = Object.keys(data.annee2018.pbj).length;

      for (var i = 0; i < object_2017enjeux_length; i++) {
        arr_periode2017.push(data.annee2017.enjeux[i].periode);
        arr_prev_2017enjeux_ca.push(data.annee2017.enjeux[i].ca);
      }
      for (var i = 0; i < object_2017pbj_length; i++) {
        arr_prev_2017pbj_ca.push(data.annee2017.pbj[i].ca);
      }
      for (var i = 0; i < object_2018enjeux_length; i++) {
        arr_periode2018.push(data.annee2018.enjeux[i].periode);
        arr_prev_2018enjeux_ca.push(data.annee2018.enjeux[i].ca);
      }
      for (var i = 0; i < object_2018pbj_length; i++) {
        arr_prev_2018pbj_ca.push(data.annee2018.pbj[i].ca);
      }

      console.log(arr_periode2017);
      console.log(arr_periode2018);
      console.log(arr_prev_2017enjeux_ca);
      console.log(arr_prev_2017pbj_ca);
      console.log(arr_prev_2018enjeux_ca);
      console.log(arr_prev_2018pbj_ca);



      var ctxPrevision = document.getElementById('myChartPrevision').getContext('2d');
      var chartPrevision = new Chart(document.getElementById("myChartPrevision"), {
          type: 'bar',
          data: {
            labels: arr_periode2018,
            datasets: [
              {
                label: "Année 2017",
                backgroundColor: "#C0C0C0",
                data: arr_prev_2017enjeux_ca
              }, {
                label: "Année 2018",
                backgroundColor: "#3AAA34",
                data: arr_prev_2018enjeux_ca
              }
            ]
          },
          options: {
            tooltips: {
              mode: 'index',
              intersect: false,
            },
            hover: {
              mode: 'nearest',
              intersect: true
            },
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              xAxes: [{
                ticks: {
                  beginAtZero: true,
                },
                gridLines: {
                  display:false
                },
                scaleLabel: {
                    display: true,
                    labelString: 'Mois'
                  }
              }],
              yAxes: [{
                ticks: {
                  beginAtZero: true,
                },
                gridLines: {
                  display:false
                },
                scaleLabel: {
                    display: true,
                    labelString: 'CA ( en millions € )'
                  }
              }]
            }
          }
      });



    // Chart PREVISION ENJEUX / PBJ UPDATE DATA ON CLICK BUTTON
    ///////////////////////////////
    var $prevision_enjeux_btn = document.querySelector('.prevision_enjeux_btn');
    var $prevision_pbj_btn = document.querySelector('.prevision_pbj_btn');
    // update la data au click sur le bouton enjeux
    $prevision_enjeux_btn.addEventListener('click', function(){
      updateData(chartPrevision, arr_periode2018, arr_prev_2017enjeux_ca, arr_prev_2018enjeux_ca);
    });
    // update la data au click sur le bouton pbj
    $prevision_pbj_btn.addEventListener('click', function(){
      updateData(chartPrevision, arr_periode2018, arr_prev_2017pbj_ca, arr_prev_2018pbj_ca);
    });
    // Active le css du bouton ENJEUX au click
    $prevision_enjeux_btn.addEventListener('click', function(){
      $prevision_enjeux_btn.classList.add('btn-active');
      $prevision_pbj_btn.classList.remove('btn-active');
    });
    // Active le css du bouton PBJ au click
    $prevision_pbj_btn.addEventListener('click', function(){
      $prevision_pbj_btn.classList.add('btn-active');
      $prevision_enjeux_btn.classList.remove('btn-active');
    });
    // END Chart PREVISION ENJEUX / PBJ
    ///////////////////////////////
});


////////////////////////////////////////////
//PREVISION EVOLUTION GLOBALE ENJEUX / PBJ
///////////////////////////////////////////
var $previsionEvolution_enjeux_btn = document.querySelector('.previsionEvolution_enjeux_btn');
var $previsionEvolution_pbj_btn = document.querySelector('.previsionEvolution_pbj_btn');
var $global_previsionEvolution_data = document.querySelector('.global-previsionEvolution-data');
var $global_previsionEvolution_rt2_data = document.querySelector('.global-previsionEvolution-rt2-data');
var $global_previsionEvolution_budget_data = document.querySelector('.global-previsionEvolution-budget-data');
var prevision_enjeux_value1 = "+3,8%";
var prevision_enjeux_value2 = "+1,9%";
var prevision_enjeux_value3 = "+2,4%";
var prevision_pbj_value1 = "+2,7%";
var prevision_pbj_value2 = "+3,3%";
var prevision_pbj_value3 = "+2,9%";


// Active le css du bouton PREVISION EVOLUTION GLOBALE ENJEUX au click
$previsionEvolution_enjeux_btn.addEventListener('click', function(){
  $previsionEvolution_enjeux_btn.classList.add('btn-active');
  $previsionEvolution_pbj_btn.classList.remove('btn-active');

  $global_previsionEvolution_data.textContent = prevision_enjeux_value1;
  $global_previsionEvolution_rt2_data.textContent = prevision_enjeux_value2;
  $global_previsionEvolution_budget_data.textContent = prevision_enjeux_value3;
});
// Active le css du bouton PREVISION EVOLUTION GLOBALE PBJ au click
$previsionEvolution_pbj_btn.addEventListener('click', function(){
  $previsionEvolution_pbj_btn.classList.add('btn-active');
  $previsionEvolution_enjeux_btn.classList.remove('btn-active');

  $global_previsionEvolution_data.textContent = prevision_pbj_value1;
  $global_previsionEvolution_rt2_data.textContent = prevision_pbj_value2;
  $global_previsionEvolution_budget_data.textContent = prevision_pbj_value3;
});
////////////////////////////////////////////
//PREVISION EVOLUTION GLOBALE ENJEUX / PBJ
///////////////////////////////////////////
















//
